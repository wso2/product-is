<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="Identity-suite-initializer" parallel="false" thread-count="1">
    <parameter name="useDefaultListeners" value="false"/>
    <listeners>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestExecutionListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestManagerListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestReportListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestSuiteListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestTransformerListener"/>
        <listener class-name="org.wso2.identity.integration.test.listeners.IdentityTestListener"/>
    </listeners>

    <test name="is-tests-initialize" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.IdentityServerTestSuitInitializerTestCase"/>
            <class name="org.wso2.identity.integration.test.base.TomcatInitializerTestCase"/>
        </classes>
    </test>

    <test name="is-tests-default-configuration" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.consent.ConsentMgtTestCase"/>
            <class name="org.wso2.identity.integration.test.user.export.UserInfoExportTestCase" />
            <class name="org.wso2.identity.integration.test.consent.SelfSignUpConsentTest"/>
            <class name="org.wso2.identity.integration.test.oauth2.OIDCDiscoveryTestCase"/>
            <class name="org.wso2.identity.integration.test.identity.governance.AdminForcedPasswordResetTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.UserMgtTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.UserMgtUISecurityTestCase"/>
            <class name="org.wso2.identity.integration.test.scim.SCIMServiceProviderUserTestCase" />
            <class name="org.wso2.identity.integration.test.scim.SCIMServiceProviderGroupTestCase" />
            <class name="org.wso2.identity.integration.test.application.mgt.ImportExportServiceProviderTest"/>
            <class name="org.wso2.identity.integration.test.application.mgt.ApplicationTemplateMgtTestCase"/>
            <!--<class name="org.wso2.identity.integration.test.application.mgt.DefaultAuthSeqManagementTestCase"/>-->
            <class name="org.wso2.identity.integration.test.user.account.connector.UserAccountConnectorTestCase"/>
            <class name="org.wso2.identity.integration.test.AuthenticationAdminTestCase"/>
            <class name="org.wso2.identity.integration.test.identity.mgt.AccountLockEnabledTestCase"/>
            <class name="org.wso2.identity.integration.test.identity.mgt.IdentityGovernanceTestCase"/>
            <class name="org.wso2.identity.integration.test.challenge.questions.mgt.ChallengeQuestionManagementAdminServiceTestCase"/>

            <class name="org.wso2.identity.integration.test.user.store.config.UserStoreConfigAdminTestCase"/>
            <class name="org.wso2.identity.integration.test.user.store.config.UserStoreConfigTestForIDENTITY5573"/>
            <class name="org.wso2.identity.integration.test.user.store.config.UserStoreDeployerTestCase"/>
            <class name="org.wso2.identity.integration.test.user.store.JDBCUserStoreAddingTestCase"/>

            <class name="org.wso2.identity.integration.test.oauth2.OAuth2RequestObjectSignatureValidationTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2IDTokenEncryptionTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2TokenRevokeWithInvalidClientCredentialsTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceErrorResponseTest"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuthAdminServiceTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceRefreshTokenGrantTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2RoleClaimTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ScopesTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2XACMLScopeValidatorTestCase"/>
            <class name="org.wso2.identity.integration.test.oidc.OIDCAuthzCodeIdTokenValidationTestCase"/>

            <!--TODO Remove following open id tests since deprecated-->
            <class name="org.wso2.identity.integration.test.openid.OpenIDAuthenticationTestCase" />
            <class name="org.wso2.identity.integration.test.openid.OpenIDProviderServerConfigTestCase" />
            <class name="org.wso2.identity.integration.test.openid.OpenIDRPManagementTestCase"/>
            <!--TODO End of openid tests-->

            <class name="org.wso2.identity.integration.test.user.profile.mgt.UserProfileMgtTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.SPMetadataTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.IDPMetadataTestCase"/>
            <class name="org.wso2.identity.integration.test.provisioning.JustInTimeProvisioningTestCase"/>
            <class name="org.wso2.identity.integration.test.idp.mgt.IdentityProviderManagementTestCase" />
            <class name="org.wso2.identity.integration.test.entitlement.EntitlementSecurityTestCase"/>
            <class name="org.wso2.identity.integration.test.entitlement.EntitlementRestServiceTestCase"/>
            <class name="org.wso2.identity.integration.test.requestPathAuthenticator.RequestPathBasicAuthenticationSSOTest" />
            <class name="org.wso2.identity.integration.test.idp.mgt.IdentityProviderMgtServiceTestCase" />
            <class name="org.wso2.identity.integration.test.dashboard.IDENTITY5811TestCase" />

            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceSAML2BearerGrantTestCase"/>
            <class name="org.wso2.identity.integration.test.application.authz.ApplicationAuthzTestCase"/>
            <class name="org.wso2.identity.integration.test.application.authz.ApplicationAuthzTenantTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceClientCredentialTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceImplicitGrantTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceIntrospectionTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceRegexCallbackUrlTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceResourceOwnerTestCase"/>
            <class name="org.wso2.identity.integration.test.oidc.OIDCAuthCodeGrantSSOTestCase"/>
            <class name="org.wso2.identity.integration.test.oidc.OIDCAuthCodeGrantSSODifferentSubjectIDTestCase"/>
            <class name="org.wso2.identity.integration.test.openid.OpenIDSSOTestCase"/>
            <class name="org.wso2.identity.integration.test.requestPathAuthenticator.SAMLWithRequestPathAuthenticationTest" />
            <class name="org.wso2.identity.integration.test.saml.SAMLErrorResponseTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.SAMLFederationDynamicQueryParametersTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.SAMLInvalidIssuerTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.SAMLSSOTestCase"/>
            <class name="org.wso2.identity.integration.test.sts.TestPassiveSTS"/>
            <!-- comment test case temporary due to log4j update -->
            <!--<class name="org.wso2.identity.integration.test.saml.SAMLIdPInitiatedSLOTestCase"/>-->
            <class name="org.wso2.identity.integration.test.postAuthnHandler.ChallengeQuestionPostAuthnHandlerTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.ReadWriteLdapBasedUserMgtTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.ReadWriteLDAPUserStoreManagerTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.dcrm.api.OAuthDCRMTestCase"/>
            <!--<class name="org.wso2.identity.integration.test.functions.library.mgt.FunctionLibraryManagementTestCase"/>-->
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2TokenRevocationWithRevokedAccessToken" />
            <class name="org.wso2.identity.integration.test.CrossProtocolLogoutTestCase"/>
        </classes>

    </test>
    <test name="is-test-rest-api" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.rest.api.server.challenge.v1.ServerChallengeTestCase"/>
            <class name="org.wso2.identity.integration.test.rest.api.user.challenge.v1.UserMeSuccessTest"/>
            <class name="org.wso2.identity.integration.test.rest.api.user.challenge.v1.UserMeNegativeTest"/>
            <class name="org.wso2.identity.integration.test.rest.api.user.association.v1.UserMeSuccessTestBase"/>
            <class name="org.wso2.identity.integration.test.rest.api.user.association.v1.UserMeNegativeTestBase"/>
            <class name="org.wso2.identity.integration.test.rest.api.user.approval.v1.UserMeApprovalTest"/>
            <class name="org.wso2.identity.integration.test.rest.api.server.claim.management.v1.ClaimManagementSuccessTest"/>
            <class name="org.wso2.identity.integration.test.rest.api.user.authorized.apps.v1.MeAuthorizedAppsNegativeTest"/>
            <class name="org.wso2.identity.integration.test.rest.api.user.authorized.apps.v1.MeAuthorizedAppsSuccessTest"/>
            <!-- Disabling /user/{user-id}/* type of API tests as they will not be exposed in 5.9.0 -->
            <!--<class name="org.wso2.identity.integration.test.rest.api.user.challenge.v1.UserSuccessTest"/>-->
            <!--<class name="org.wso2.identity.integration.test.rest.api.user.challenge.v1.UserNegativeTest"/>-->
        </classes>
    </test>


    <!--
    ====================================================================================================================
        IMPORTANT : All the tests below this section, should be the ones that requires configuration changes and
        restarts.

        To minimize the number of restarts, at each test, do the configuration update and restart. Then do the test
        and finally restore the configuration without restarting. The next test will perform the restart with the
        configuration changes required for it.

        If multiple tests can be run with one configuration change, group them into a test group and do the above at
        @BeforeTest, and @AfterTest. See 'is-tests-jdbc-userstore' for example.
    ====================================================================================================================

    -->

    <test name="is-tests-scim2" preserve-order="true" parallel="false">
        <classes>
            <class name="org.wso2.identity.integration.test.scim2.SCIM2UserTestCase"/>
            <class name="org.wso2.identity.integration.test.scim2.SCIM2GroupTestCase"/>
            <class name="org.wso2.identity.integration.test.scim2.SCIM2MeTestCase"/>
            <class name="org.wso2.identity.integration.test.scim2.SCIM2MultiAttributeUserFilterTestCase"/>
        </classes>
    </test>
    <test name="is-tests-federation" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.base.SecondaryCarbonServerInitializerTestCase"/>
            <class name="org.wso2.identity.integration.test.sts.TestPassiveSTSFederation"/>
            <class name="org.wso2.identity.integration.test.auth.ConditionalAuthenticationTestCase" />
            <class name="org.wso2.identity.integration.test.provisioning.ProvisioningTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.ChangeACSUrlTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.SAMLFederationWithFileBasedSPAndIDPTestCase"/>
            <class name="org.wso2.identity.integration.test.workflow.mgt.WorkflowManagementTestCase"/>
        </classes>
    </test>
    <test name="is-tests-jdbc-userstore" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.base.JDBCUserStoreInitializerTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.JDBCBasedUserMgtTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.JDBCUserStoreManagerTestCase"/>
        </classes>
    </test>
    <test name="is-tests-read-only-userstore" preserve-order="true" parallel="false" group-by-instances="true" >
        <classes>
            <class name="org.wso2.identity.integration.test.user.mgt.ReadOnlyLDAPUserStoreManagerTestCase"/>
        </classes>
    </test>
    <test name="is-tests-oauth-jwt-token-gen-enabled" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceAuthCodeGrantOpenIdRequestObjectTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceAuthCodeGrantOpenIdTestCase"/>
        </classes>
    </test>
    <test name="is-analytics-tests-deprecated-config" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.analytics.base.AnalyticsBaseTestCase"/>
            <class name="org.wso2.identity.integration.test.analytics.authentication.AnalyticsLoginTestCase"/>
            <class name="org.wso2.identity.integration.test.analytics.oauth.OAuth2TokenIssuance"/>
        </classes>
    </test>
    <test name="is-analytics-tests-new-config" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.analytics.authentication.AnalyticsLoginDataPublishHandlingTestCase"/>
        </classes>
    </test>
    <test name="is-tests-email-username" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.user.mgt.CARBON15051EmailLoginTestCase"/>
        </classes>
    </test>
    <test name="is-tests-with-individual-configuration-changes" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.provisioning.DBSeperationTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceAuthCodeGrantTestCase"/>
            <class name="org.wso2.identity.integration.test.scim.IDENTITY4776SCIMServiceWithOAuthTestCase" />
            <class name="org.wso2.identity.integration.test.identity.mgt.UserInformationRecoveryServiceTenantEmailUserTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.Oauth2HashAlgorithmTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.Oauth2PersistenceProcessorInsertTokenTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.Oauth2PersistenceProcessorTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceJWTGrantTestCase"/>
            <class name="org.wso2.identity.integration.test.oauth2.Oauth2TokenRenewalPerRequestTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.RegistryMountTestCase"/>
            <!--<class name="org.wso2.identity.integration.test.saml.SAMLECPSSOTestCase"/>-->
            <class name="org.wso2.identity.integration.test.user.profile.mgt.UserProfileAdminTestCase"/>
            <!-- TODO this test has a restart-->
            <class name="org.wso2.identity.integration.test.auth.RiskBasedLoginTestCase" />
        </classes>
    </test>
</suite>
