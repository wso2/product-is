<!--
  ~ Copyright (c) 2017, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
  ~
  ~ WSO2 Inc. licenses this file to you under the Apache License,
  ~ Version 2.0 (the "License"); you may not use this file except
  ~ in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied. See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->

<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="defaultGroup">
    <parameter name="useDefaultListeners" value="false"/>

    <!--Parameters required for IS startup.-->
    <parameter name="-DportOffset" value="410"/>
    <parameter name="-Dsetup" value="true"/>

    <listeners>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestExecutionListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestManagerListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestReportListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestSuiteListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestTransformerListener"/>
        <listener class-name="org.wso2.identity.integration.test.listeners.IdentityTestListener"/>
        <listener class-name="org.wso2.identity.integration.test.listeners.IdentityPrimaryISDeployer"/>
    </listeners>

    <test name="is-tests-initialize" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.IdentityServerTestSuitInitializerTestCase"/>
        </classes>
    </test>

    <test name="is-tests-discovery" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <!--TODO gives error-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OIDCDiscoveryTestCase"/>-->
        </classes>
    </test>

    <test name="is-tests-governance" preserve-order="true" parallel="false">
        <classes>
            <class name="org.wso2.identity.integration.test.identity.governance.AdminForcedPasswordResetTestCase"/>
        </classes>
    </test>

    <test name="is-tests-usr-mgt" preserve-order="true" parallel="false">
        <classes>
            <class name="org.wso2.identity.integration.test.user.mgt.UserMgtTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.ReadWriteLDAPUserStoreManagerTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.UserMgtUISecurityTestCase"/>
        </classes>
    </test>

    <test name="is-tests-all" preserve-order="true" parallel="false">
        <classes>
            <!--TODO gives error-->
            <!--<class name="org.wso2.identity.integration.test.user.account.connector.UserAccountConnectorTestCase"/>-->
            <class name="org.wso2.identity.integration.test.AuthenticationAdminTestCase"/>
            <class name="org.wso2.identity.integration.test.claim.metadata.mgt.ClaimMetadataManagementServiceTestCase"/>

            <!--Identity Management Test Cases-->
            <class name="org.wso2.identity.integration.test.identity.mgt.AccountLockEnabledTestCase"/>
            <class name="org.wso2.identity.integration.test.identity.mgt.IdentityGovernanceTestCase"/>

            <class name="org.wso2.identity.integration.test.challenge.questions.mgt.ChallengeQuestionManagementAdminServiceTestCase"/>

            <!--TODO-->

            <!--User Store Test Cases-->
            <class name="org.wso2.identity.integration.test.user.store.config.UserStoreConfigAdminTestCase"/>
            <class name="org.wso2.identity.integration.test.user.store.config.UserStoreConfigTestForIDENTITY5573"/>
            <!--TODO gives error-->
            <!--<class name="org.wso2.identity.integration.test.user.store.config.UserStoreDeployerTestCase"/>-->
            <class name="org.wso2.identity.integration.test.user.store.JDBCUserStoreAddingTestCase"/>

             <!--OAuth Test Cases-->
            <!--TODO gives error until OAuth2ServiceErrorResponseTest-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceClientCredentialTestCase"/>-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceImplicitGrantTestCase"/>-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceRegexCallbackUrlTestCase"/>-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceResourceOwnerTestCase"/>-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OAuth2TokenRevokeWithInvalidClientCredentialsTestCase"/>-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceErrorResponseTest"/>-->
            <class name="org.wso2.identity.integration.test.oauth2.OAuthAdminServiceTestCase"/>
            <!--TODO gives error until OAuth2ServiceSAML2BearerGrantTestCase-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceIntrospectionTestCase"/>-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.Oauth2PersistenceProcessorTestCase"/>-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.OAuth2ServiceSAML2BearerGrantTestCase"/>-->

            <!--OIDC Test Cases-->
            <class name="org.wso2.identity.integration.test.oidc.OIDCAuthCodeGrantSSOTestCase"/>
            <class name="org.wso2.identity.integration.test.oidc.OIDCAuthCodeGrantSSODifferentSubjectIDTestCase"/>

            <!--OpenId Test Cases-->
            <class name="org.wso2.identity.integration.test.openid.OpenIDAuthenticationTestCase" />
            <class name="org.wso2.identity.integration.test.openid.OpenIDProviderServerConfigTestCase" />
            <class name="org.wso2.identity.integration.test.openid.OpenIDRPManagementTestCase"/>
            <!--TODO Data relevant to restart has been commented out from the DataProvider. Upon uncommenting that
                TODO please find a relevant group for this test case-->
            <class name="org.wso2.identity.integration.test.openid.OpenIDSSOTestCase" />
            <!--PassiveSTS Test Cases-->
            <class name="org.wso2.identity.integration.test.sts.TestPassiveSTS"/>
            <!--User Profile Management Test Cases-->
            <class name="org.wso2.identity.integration.test.user.profile.mgt.UserProfileMgtTestCase"/>
            <!--SCIM Test Cases-->
            <class name="org.wso2.identity.integration.test.scim.SCIMServiceProviderUserTestCase" />
            <class name="org.wso2.identity.integration.test.scim.SCIMServiceProviderGroupTestCase" />
            <!--SAML Test Cases-->
            <class name="org.wso2.identity.integration.test.saml.SAMLInvalidIssuerTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.SPMetadataTestCase"/>
            <class name="org.wso2.identity.integration.test.saml.IDPMetadataTestCase"/>

            <!--Identity Provider Management Test Cases-->
            <class name="org.wso2.identity.integration.test.idp.mgt.IdentityProviderManagementTestCase" />
            <class name="org.wso2.identity.integration.test.requestPathAuthenticator.RequestPathAuthenticatorBaseTestCase" />
            <!--Entitlement Test Cases-->
            <class name="org.wso2.identity.integration.test.entitlement.EntitlementSecurityTestCase"/>

            <!-- Request path authenticator test cases-->
            <class name="org.wso2.identity.integration.test.requestPathAuthenticator.RequestPathAuthenticatorInvalidUserTestCase" />
            <class name="org.wso2.identity.integration.test.requestPathAuthenticator.IDENTITY4604RequestPathAuthWithSAMLSSO" />
            <class name="org.wso2.identity.integration.test.idp.mgt.IdentityProviderMgtServiceTestCase" />
            <class name="org.wso2.identity.integration.test.dashboard.IDENTITY5811TestCase" />
        </classes>
    </test>

    <test name="is-tests-sequential" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <!--TODO gives error-->
            <!--<class name="org.wso2.identity.integration.test.saml.SAMLSSOTestCase"/>-->
            <class name="org.wso2.identity.integration.test.application.authz.ApplicationAuthzTestCase"/>
            <!--TODO gives error-->
            <!--<class name="org.wso2.identity.integration.test.application.authz.ApplicationAuthzTenantTestCase"/>-->
            <!--TODO takes too mcuh time-->
            <!--<class name="org.wso2.identity.integration.test.oauth2.dcrm.api.OAuthDCRMTestCase"/>-->
        </classes>
    </test>

    <test name="is-tests-saml-sequential" preserve-order="true" parallel="false">
        <classes>
            <class name="org.wso2.identity.integration.test.user.profile.mgt.UserProfileAdminTestCase"/>
        </classes>
    </test>

</suite>